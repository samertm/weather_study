## OWM Notes 20140430

[edited 20140430]

 1. Found unexplained JSON error in download #8024 or #8025 last night and the program stopped running. Have added code to survive errors of that kind — will simply pass the downloaded content as a string, rather than JSON if the error happens five times — but in any case we've lost the remaining 3K downloads for that session.
 1. Added function `retrieve.get_single_date_data_from_db_json()` to supply JSON output. Read the comments to see a description of the output's multiply nested dictionary structure. Output is JSON as default; pass `JSONize=False` to get the output as the raw dictionary. At the moment we still have some number of values that are sub-subdictionaries consisting of `{'mint': None, 'rain': None, 'maxt': None, 'snow': None}`. I wonder if it would make sense to render these values simply as `None` alone. It would be clearest to do this as a separate step after construction of the dictionary, rather than including this in the dictionary comprehension. But the latter would save a little time, probably.

[end]
